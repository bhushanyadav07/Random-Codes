<?php

function checkDateRange($startDate) {
  // Validate input format (optional)
  if (!preg_match("/^\d{4}-\d{2}-\d{2}$/", $startDate)) {
    return "Invalid date format. Please use YYYY-MM-DD.";
  }

  // Extract year, month, and day from start_date
  $startDateParts = explode("-", $startDate);
  $startYear = (int) $startDateParts[0];
  $startMonth = (int) $startDateParts[1];
  $startDay = (int) $startDateParts[2];

  // Define the end date (22nd of the next month)
  $endYear = $startYear;
  $endMonth = ($startMonth % 12) + 1; // Increment month, handle rollover to next year
  $endDay = 22;

  // Check if start_date is within the defined range
  if (($startYear == $endYear && $startMonth == $endMonth && $startDay <= $endDay) ||
      ($startYear == $endYear - 1 && $startMonth == 12 && $startDay >= 23)) {
    return 1; // Within range
  } else {
    return 0; // Not within range
  }
}

// Example usage
$startDate = "2024-05-05"; // Example date
$result = checkDateRange($startDate);

if ($result === 1) {
  echo "The start_date falls within the defined date range (entire May + June 22nd).";
} else if ($result === 0) {
  echo "The start_date does not fall within the defined date range.";
} else {
  echo $result; // Handle invalid input format (if not validated earlier)
}

?>
